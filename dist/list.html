<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>REWQ - swipe shortdut on your keyboard</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div>
        <h3>Destination Links</h3>
        <p id='links-placeholder' />
    </div>
    <script>
        var enabled = [];
        var count = parseInt(localStorage.getItem('count') || 0);
        for (var idx = 0; idx < count; idx++) {
            var data = localStorage.getItem('row-' + idx);
            var record = data && JSON.parse(data);
            if (!record || !record.enabled) {
                continue;
            }
            enabled.push(record);
        }

        if (enabled.length === 0) {
            window.location.pathname = '/settings';
        } else {
            var innerHtml = [];
            enabled.forEach(function(rec, idx) {
                var title = rec.desc ? (rec.desc + "( " + rec.url + " )") : rec.url;
                innerHtml.push(
                    (idx+1) + '. <a href="' + rec.url + '">' + title + "</a><br><br>"
                );
            });

            document.addEventListener('DOMContentLoaded', function() {
                var linksDiv = document.getElementById('links-placeholder');
               linksDiv.innerHTML = innerHtml.join('');
            });
        }
    </script>
    <br>
    <h3>Help</h3>
    <p>To Change Settings - <a href="https://rewq.netlify.app/settings">rewq.netlify.app/settings</a></p>    
</body>
</html>